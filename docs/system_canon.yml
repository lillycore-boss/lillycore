- id: system_canon.overview
  kind: overview
  md: |
    This document is the canonical system-level registry for LillyCORE.
    It is expressed as a block-structured YAML document so GPT tooling can load
    discrete authoritative blocks by stable ID.

    Scope:
    - System-level canon blocks that define durable, shared vocabulary and references.
    - Structural alignment only for this card; meanings are preserved.

    Non-goals:
    - Introducing new governance, categories, or kinds.
    - Changing the semantic meaning of existing canon content.

- id: system_canon.allowed_kinds
  kind: meta
  md: |
    # Allowed kinds

    This file uses the following block kinds:

    - overview
    - meta
    - index
    - ontology

- id: system_canon.index
  kind: index
  md: |
    # system_canon index

    - system_canon.overview
    - system_canon.allowed_kinds
    - system_canon.index
    - system_canon.system_ontology
    - system_canon.rruntime_settings_contract


- id: system_canon.system_ontology
  kind: ontology
  md: |
    LillyCORE uses a precise vocabulary to prevent GPT drift.

    CORE:
      - Runtime loop, logging, preferences
      - AI pools
      - System DOC (durable storage)
      - Engines (core subsystems)

    ENGINES (Core Subsystems):
      - DRIFT_ENGINE     → Context/emotion/perception processor (formerly 2a)
      - HELPER_ENGINE    → Work engine / backend orchestrator (formerly 2b)
      - PLUGIN_ENGINE    → Loads and routes external plugins
      - HELP_DESK_ENGINE → Failure detection and self-repair
      - DREAM_ENGINE     → Optimization, degradation, drift management
      - SCRIPT_ENGINE    → Internal script optimizer & validator

    PLUGINS:
      - Optional add-ons that extend behaviour without modifying the core.
      - Examples:
          UX Plugin
          Notes Plugin
          Project Management Plugin
          Personal Assistant Plugin
          Multi-User Plugin
          Demo Plugins

    PIPELINES:
      - Named multi-step processes involving engines, plugins, or pools.

    AGENTS:
      - LLM-driven reasoning entities used by engines or plugins.

    DOC LAYERS:
      - System DOC → durable system-level storage
      - Plugin DOC → per-plugin storage boundary
      - User DOC   → user-generated content

- id: system_canon.runtime_settings_contract
  kind: ontology
  md: |
    ## Runtime System Settings Contract
    Purpose:
    - Define the canonical Phase 1 contract for operational/runtime settings.
    - Prevent path/format/precedence drift across tools and GPTs.
    
    Scope:
    - Runtime/operational settings only (e.g. loop timing, logging verbosity).
    - Explicitly NOT persona or AI behaviour settings.
    
    Canonical file:
    Path: `lillycore/runtime/config/runtime.system.json`
    Format: JSON
    
    Precedence (lowest → highest):
    - defaults < system settings file < temporary override

    Missing file behaviour:
    - If the canonical file is missing, runtime MUST fall back to defaults and SHOULD log a warning.
