- id: formatting_and_replacement_standards.overview
  kind: overview
  md: |
    ## 9. Formatting & Replacement Standards

    This section defines how GPTs format **documentation updates** now that
    canonical structure lives in `docs/*.yml` files.

    - The **registry YAML** (IDs, kinds) is the structural authority.
    - The `md` fields inside blocks hold **human-readable markdown only**.
    - We do **not** repeat “FILE: … / ROLE: … / VERSION: …” headers in markdown
      where the same information is already present as YAML metadata.

    These rules apply whenever GPTs are:
    - Proposing changes to registry docs (`docs/registry/*.yml`), or
    - Emitting markdown that will live in `md:` fields inside those registry blocks.

- id: formatting_and_replacement_standards.section_9_0_canonical_file_block_format
  kind: section
  md: |
    ### 9.0  Canonical File Block Format

    - id: <required>
      kind: <required>
      md: |
        <required markdown>

    Required blocks per canonical file
    - One overview block (kind: overview)
    - One allowed_kinds block (kind: meta)

- id: formatting_and_replacement_standards.section_9_1_yaml_vs_markdown_responsibilities
  kind: section
  md: |
    ### 9.1 YAML vs Markdown Responsibilities

    YAML defines:
    - Block IDs (`id`)
    - Block kinds (`kind`)

    Markdown (`md:`) defines:
    - The text humans read (explanations, lists, examples, checklists).
    - Local headings inside that block only.

    GPTs MUST NOT:
    - Recreate file-level banners like `FILE: tech_spec`, `ROLE: …`, `VERSION: …`
      inside `md` if that information is already present in YAML metadata.
    - Invent new file-level markers that conflict with the registry format.

    GPTs MAY:
    - Include small inline reminders or labels inside `md` when it helps readability
      (e.g. “This block describes Section 4 – Update Triggers”),
      as long as that does not conflict with the registry metadata.

- id: formatting_and_replacement_standards.section_9_2_markdown_style_inside_md_fields
  kind: section
  md: |
    ### 9.2 Markdown Style Inside `md` Fields

    When writing markdown inside a block’s `md:`:

    - **Headings**
      - Use normal markdown headings (`#`, `##`, `###`) for structure.
      - Keep heading levels shallow and consistent within a block.
      - Do **not** try to recreate a “top of file” heading; the block itself is
        the unit of meaning.

    - **Lists**
      - Use standard `-` bullet lists or numbered lists.
      - Keep items short and atomic where possible.

    - **Code & Examples**
      - Use fenced code blocks for examples and paste-ready content, e.g.:

        ```markdown
        ```markdown
        ## 4. Update Triggers
        ...
        ```
        ```

      - Choose a language hint (`markdown`, `yaml`, `python`, `text`) when useful.

    - **ASCII SECTION Patterns**
      - Do not use the older `SECTION: ...` ASCII bars.

- id: formatting_and_replacement_standards.section_9_3_block_level_replacement
  kind: section
  md: |
    ### 9.3 Block-Level Replacement (Not Line-Level Surgery)

    For documentation changes, the **atomic unit of change** is a single registry block:

    - One `blocks[…]` entry with its `id`, `kind`, and `md`.

    GPTs MUST:
    - Replace the entire `md` field for that block when updating it.
    - Avoid “change just these two lines” style instructions.

    In chat, GPTs SHOULD:

    - Present updates as fenced blocks that show the **full new content**:
      - Either the full YAML block, or
      - The full markdown body that should become the new `md:` content.
    - Clearly label what is being replaced, for example:
      - “Replace `documentation_protocol.section.4_update_triggers` md with: …”

- id: formatting_and_replacement_standards.section_9_4_markdown_chunks_used_in_md_files
  kind: section
  md: |
    ### 9.4 Markdown Chunks Used in `.md` Files

    When markdown from a registry block is meant to be pasted back into a
    `.md` file (e.g. `docs/build/documentation_protocol.md`):

    - The chunk MUST:
      - Start at a logical heading boundary (e.g. `## 4. Update Triggers`).
      - Include the full section down to (but not including) the next heading
        of the same level, or the end of the parent section.
    - GPTs MUST NOT:
      - Ask for surgical line edits in those files.
      - Depend on fragile alignment or spacing tricks.

- id: formatting_and_replacement_standards.allowed_kinds
  kind: meta
  md: |
    Required blocks per canonical file
    - One overview block (kind: overview)
    - One allowed_kinds block (kind: meta)
