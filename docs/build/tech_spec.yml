  - id: tech_spec.overview
    kind: overview
    md: |
      # TECH_SPEC

      Purpose:
      - Define the technical environment and baseline engineering standards for LillyCORE.
      - Prevent guessing, drift, and cross-platform nonsense.

      Scope:
      - Python runtime baseline
      - Tooling baseline (formatter, linter, tests)
      - Repository-root conventions (where configs live)
      - Minimal execution conventions (how to run checks)

      Out of scope (explicit):
      - Runtime architecture and engine/plugin behavior
      - GPT role behaviour rules (see BUILD_CANON and DOCUMENTATION_PROTOCOL)
      - Documentation update procedures (see DOCUMENTATION_PROTOCOL)

  - id: tech_spec.platform_assumptions
    kind: platform
    md: |
      ## Platform Assumptions

      Primary development platform:
      - Linux (Pop!_OS).

      GPT constraint:
      - GPTs MUST NOT provide Windows/Mac-specific instructions unless Andrew explicitly asks.
      - If cross-platform behavior matters, GPTs MUST ask what targets are required.

  - id: tech_spec.python_baseline
    kind: baseline
    md: |
      ## Python Baseline

      Minimum supported Python:
      - Python 3.11+

      Notes:
      - All code, scripts, and tooling choices MUST be compatible with the minimum version.

  - id: tech_spec.best_practice_policy
    kind: policy
    md: |
      ## Best-Practice Policy (Default)

      Default stance:
      - Use widely accepted Python best practices to reduce context load and drift.

      Constraint:
      - Best practice MUST be treated as a default, not a law.
      - If best practice conflicts with a LillyCORE requirement, the requirement wins,
        but the exception MUST be documented here.

  - id: tech_spec.repo_root_definition
    kind: repo
    md: |
      ## Repository Root Definition

      Definition:
      - "Repository root" = the top-level directory of the lillycore repository
        (the folder containing .git and the main project files).

      Policy:
      - Repository-wide configuration files live at repository root unless explicitly stated otherwise.

  - id: tech_spec.tooling_baseline
    kind: tooling
    md: |
      ## Tooling Baseline (Conceptual)

      Purpose:
      - Keep code consistent and catch obvious mistakes early.

      Definitions (plain English):
      - Formatter:
          Automatically rewrites code layout (spacing, wrapping) to a consistent style.
      - Linter:
          Checks code for likely bugs, suspicious patterns, and rule violations.
      - Test framework:
          Runs automated checks to confirm behavior.
      - CI gate:
          A rule that says: "Changes are not considered valid unless required checks pass."

- id: tech_spec.tooling_choices
  kind: decisions
  md: |
    ## Tooling Choices (Authoritative)

    Status:
    - This section is the authoritative list of tooling selections.
    - If a choice is not listed here, it is not selected.

    Current selections:
    - Formatter: Black
    - Linter: Ruff
    - Test framework: Pytest

  - id: tech_spec.change_log
    kind: meta
    md: |
      ## Change Log (Lightweight)

      - v1.0: Clean baseline rewrite. Python 3.11+ established. No-guessing + best-practice policy defined.

- id: tech_spec.repo_taxonomy_authority
  kind: rules
  md: |
    ## Repository Taxonomy Authority & Change Process

    Authority:
    - TECH_SPEC is the authoritative source for repository layout and
      folder taxonomy during Phase 0.
    - BUILD_CANON governs ontology and planning discipline, not physical layout.

    Rules:
    - Files and folders MUST follow the taxonomy defined in TECH_SPEC.
    - Implementers MUST NOT silently change repository structure.

    Any change to:
    - the set of top-level folders under the repository root, or
    - the meaning or responsibilities of those folders

    MUST:
    - be designed via an Architect-approved card, and
    - update TECH_SPEC accordingly.

    BUILD_CANON is updated ONLY when underlying ontology or planning
    discipline changes â€” not for ordinary layout changes.
