- id: qa_reference.overview
  kind: overview
  md: |
    ## 1. GitHub Project Layout Overview

    ### Project Name
    **LillyCORE QA**

    ### Columns
    - **Ready** – Newly created QA cards.
    - **In Progress** – QA fixes currently being worked.
    - **Pending Review** – Completed work awaiting QA validation.
    - **Done** – QA card completed and validated.
    - **Graveyard** – Archived failed attempts or deprecated QA cards.

    ### Custom Fields
    | Field Name        | Type          | Description |
    |-------------------|---------------|-------------|
    | Phase ID          | Text          | The phase this QA card belongs to (e.g., `P0.4`). |
    | Parent Card ID    | Text          | The phase/sub-phase card this QA issue originates from (e.g., `P0.4.4`). |
    | QA Card ID        | Text          | Unique identifier for the QA card (e.g., `P0.4.QA.1`). |
    | Deliverables      | Text          | Comma-separated list of deliverables under test (e.g., `D9, D10`). |
    | Result            | Single-select | `PENDING`, `PASS`, `FAIL`, `FAIL_ESCALATE`. |
    | Attempt #         | Number        | Records which QA attempt this is for the phase. |

- id: qa_reference.github_automation_scripts
  kind: reference
  md: |
    ## 2. GitHub Automation Scripts & Command Templates

    Below are standard GitHub CLI command templates for card creation, updating, movement, archiving, and QA report attachment.

    ### 2.1 Create a QA Card
    ```
    gh issue create   --title "<QA_CARD_ID> – Fix failure in <Deliverable>"   --body "<failure description>"   --project "<QA_PROJECT_NUMBER>"   --field "Phase ID=<PHASE_ID>"   --field "Parent Card ID=<PARENT_CARD_ID>"   --field "QA Card ID=<QA_CARD_ID>"   --field "Deliverables=<LIST>"   --field "Result=PENDING"   --field "Attempt #=<ATTEMPT_NUMBER>"
    ```

    ### 2.2 Move a QA Card Between Columns
    ```
    gh project item move <ITEM_ID>   --project "<QA_PROJECT_NUMBER>"   --column "<COLUMN_NAME>"
    ```

    Common columns:
    - `Ready`
    - `In Progress`
    - `Pending Review`
    - `Done`
    - `Graveyard`

    ### 2.3 Edit Fields on a Card
    ```
    gh project item edit <ITEM_ID>   --field "<FIELD_NAME>=<VALUE>"
    ```

    Examples:
    ```
    --field "Result=PASS"
    --field "Attempt #=2"
    ```

    ### 2.4 Append a QA Report to a Phase Card
    ```
    # Step 1: Retrieve current issue body
    gh issue view <ISSUE_NUMBER> --json body --jq '.body' > card.txt

    # Step 2: Append QA report
    echo "

    ## QA Report – <RESULT> (Attempt <ATTEMPT_NUMBER>)
    Deliverables Tested: <LIST>
    Timestamp: <TIME>
    --------------------
    <REPORT_CONTENT>

    " >> card.txt

    # Step 3: Push updated body
    gh issue edit <ISSUE_NUMBER> --body-file card.txt
    ```

    ### 2.5 Archive a QA Card (Move to Graveyard)
    ```
    gh project item move <ITEM_ID>   --project "<QA_PROJECT_NUMBER>"   --column "Graveyard"
    ```

    ### 2.6 Move Entire Phase to Archive (Global Failure Case)
    ```
    gh project item move <ITEM_ID>   --project "<MAIN_PROJECT_NUMBER>"   --column "Graveyard"
    ```

- id: qa_reference.notes
  kind: reference
  md: |
    ## 3. Notes
    - All commands assume issue-based workflow (no markdown files in repo).
    - GPT agents should generate commands, and Andrew manually executes them.
    - The canonical QA block structure is always appended to the **end** of the issue body.
    - All sections are deterministic and designed for AI-friendly parsing.

    Document generated automatically by Lilly for Phase 0.4 deliverables.
- id: qa_reference.allowed_kinds
  kind: meta
  md: |
    Allowed kinds for QA_REFERENCE:

    - overview
    - meta
    - index
    - reference
    - template

    If no existing kind fits a new block, follow
    `documentation_protocol.kind_governance`.

- id: qa_reference.index
  kind: index
  md: |
    ## QA_REFERENCE Block Index

    QA_REFERENCE is a helper document containing deterministic conventions and
    GitHub CLI templates used for QA card workflow.

    ### Blocks in this file

    - `qa_reference.overview`
      Overview of the QA project layout and intent.

    - `qa_reference.allowed_kinds`
      List of permitted block kinds for this file.

    - `qa_reference.github_automation_scripts`
      GitHub CLI command templates for creating, moving, editing, and appending QA reports.

    - `qa_reference.notes`
      Notes and conventions (e.g., append-to-end rule, deterministic structure).

    ### Explicitly not defined here

    - QA PASS/FAIL governance (see DOCUMENTATION_PROTOCOL)
    - Phase deliverables and scope (see phase cards / FEATURES system)

